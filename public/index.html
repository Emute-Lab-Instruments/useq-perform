<!DOCTYPE html>
<html>
<head>
  <!-- Metadata and title -->
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width'>
  <title>uSEQ Perform</title>

  <!-- External libraries and styles -->
  <script src="lib/jquery-3.7.1.js"></script>
  <link rel="stylesheet" href="bundle.css">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.min.js"></script>
  <script>
    // Initialize Lucide icons after DOM content is loaded
    document.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons();
    });

    // CSS Hot Reload
    const link = document.querySelector('link[href="bundle.css"]');
    let lastModified = Date.now();
    
    setInterval(async () => {
      try {
        const response = await fetch('bundle.css');
        const newModified = response.headers.get('last-modified');
        
        if (newModified) {
          const newTimestamp = new Date(newModified).getTime();
          if (newTimestamp > lastModified) {
            link.href = `bundle.css?${Date.now()}`;
            lastModified = newTimestamp;
            console.log('CSS updated');
          }
        }
      } catch (error) {
        console.error('Error checking for CSS updates:', error);
      }
    }, 1000);
  </script>
</head>
<body>
  <!-- Toolbar panel with buttons -->
  <div id="panel-toolbar">
      <div class="toolbar-row">
        <!-- Connection and graph buttons -->
        <a class="toolbar-button" id="button-connect" title="Connect"><i data-lucide="cable"></i></a>
        <a class="toolbar-button" id="button-graph" title="Graph"><i data-lucide="chart-spline"></i></a>
      </div>
      <div class="toolbar-row">
        <!-- Font size adjustment buttons -->
        <a class="toolbar-button" id="button-decrease-font" title="Font size--"><i data-lucide="a-arrow-down"></i></a>
        <a class="toolbar-button" id="button-increase-font" title="Font size++"><i data-lucide="a-arrow-up"></i></a>
      </div>
      <div class="toolbar-row">
        <!-- Help and settings buttons -->
        <a class="toolbar-button" id="button-help" title="Help!"><i data-lucide="circle-help"></i></a>
        <a class="toolbar-button" id="button-settings" title="Settings"><i data-lucide="settings"></i></a>
      </div>
  </div>

  <!-- Console and main editor panels -->
  <div id="panel-main-editor"></div>
  <div id="panel-console"></div>

  <!-- Visualization panel with canvases -->
  <div id="panel-vis"> 
    <canvas class="serialcanvas" width="1000" height="800" id="serialcanvas"></canvas>
    <canvas id="canvas-plot" width="1000" height="800"></canvas>
    <canvas id="canvas-timeline" width="1000" height="800"></canvas>
  </div>

  <!-- Settings panel with tabs -->
  <div id="panel-settings" class="panel-aux" style="display: none;"></div>

  <!-- Help documentation panel -->
  <div id="panel-help" class="panel-aux" style="display: none;"></div>

  <!-- Main JavaScript module -->
  <script type="module" src='bundle.mjs'></script>
</body>
</html>


